name: Update Twitter Feed

on:
  schedule:
    # Runs every 6 hours
    - cron: '0 */6 * * *'
  workflow_dispatch: # Allows manual trigger

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Update README with latest tweets
        uses: andyruwruw/github-twitter@latest
        with:
          # Your Twitter username
          twitter_user: 'hancengiz'
          # Maximum number of tweets to display
          max_tweets: 5
          # GitHub token for committing changes
          gh_token: ${{ secrets.GITHUB_TOKEN }}
          # Optional: customize layout
          tweet_layout: 'wide'

      - name: Commit and push if changed
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
          git add README.md
          git diff --quiet && git diff --staged --quiet || (git commit -m "Update Twitter feed [automated]" && git push)
